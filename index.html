<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indicadores Financeiros</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Indicadores Financeiros em Tempo Real</h1>
  </header>

  <main>
    <section id="quotes">
      <!-- Indicadores serão carregados aqui -->
    </section>

    <section id="halving-info" class="halving-info">
      <div>
        <span>Blocos restantes para o halving: <strong id="blocks-remaining">--</strong></span>
      </div>
      <div>
        <span>Dias estimados para o halving: <strong id="days-remaining">--</strong></span>
      </div>
    </section>

    <section id="satoshi-quotes" class="satoshi-quotes">
      <h2>Citações de Satoshi Nakamoto</h2>
      <div class="quote-container">
        <blockquote></blockquote>
      </div>
    </section>

    <section class="donation-section">
      <h3>Doação</h3>
      <p class="donation-address-text" style="user-select: all;">1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa</p>
      <button id="copy-address">Copiar Endereço</button>
    </section>
  </main>

  <footer>
    <div>
      <span>BTC: <strong id="footer-btc-price">--</strong></span> |
      <span>Gold: <strong id="footer-gold-price">--</strong></span> |
      <span>Silver: <strong id="footer-silver-price">--</strong></span>
    </div>
  </footer>

  <script>
    const ALPHA_VANTAGE_API_KEY = "YXNV7ACP45FN4RZC";

    const HALVING_INTERVAL = 210000;
    const BLOCK_TIME_MINUTES = 10;

    const initialAssets = [
      { name: "Bitcoin", price: "$107,016.57", change: "+2.4%", positive: true },
      { name: "Gold", price: "$3,323.10", change: "+0.8%", positive: true },
      { name: "Silver", price: "$33.69", change: "-0.3%", positive: false },
      { name: "10-Year Treasury Yield", price: "4.38%", change: "+0.05%", positive: true },
      { name: "Dollar Index", price: "103.42", change: "-0.2%", positive: false },
      { name: "S&P 500", price: "5,218.24", change: "+0.7%", positive: true }
    ];

    const quotes = [
      "The root problem with conventional currency is all the trust that's required to make it work. The central bank must be trusted not to debase the currency, but the history of fiat currencies is full of breaches of that trust.",
      "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks.",
      "I've been working on a new electronic cash system that's fully peer-to-peer, with no trusted third party.",
      "The central bank must be trusted not to debase the currency, but the history of fiat currencies is full of breaches of that trust.",
      "Banks must be trusted to hold our money and transfer it electronically, but they lend it out in waves of credit bubbles with barely a fraction in reserve.",
      "With e-currency based on cryptographic proof, without the need to trust a third party middleman, money can be secure and transactions effortless."
    ];

    function formatCurrency(value) {
      return value.toLocaleString('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }

    function formatPercentageChange(change) {
      const changeNum = parseFloat(change);
      return `${changeNum >= 0 ? '+' : ''}${changeNum.toFixed(1)}%`;
    }

    function formatAbsoluteChange(change) {
      const changeNum = parseFloat(change);
      return `${changeNum >= 0 ? '+' : ''}${changeNum.toFixed(2)}%`;
    }

    function renderQuotes(assetsToRender) {
      const quotesContainer = document.getElementById('quotes');
      if (!quotesContainer) return;

      quotesContainer.innerHTML = '';

      assetsToRender.forEach(asset => {
        const quoteWrapper = document.createElement('div');
        quoteWrapper.className = 'quote-wrapper';

        const quote = document.createElement('div');
        quote.className = 'quote';

        const quoteLeft = document.createElement('div');
        quoteLeft.className = 'quote-left';

        const nameStrong = document.createElement('strong');
        nameStrong.textContent = asset.name;

        let tooltip = '';
        if (asset.name === "10-Year Treasury Yield") {
          tooltip = `<span class="index-tooltip">The yield on the U.S. 10-year Treasury note, a key benchmark for interest rates. (Source: Alpha Vantage)</span>`;
        } else if (asset.name === "Dollar Index") {
          tooltip = `<span class="index-tooltip">Measures the value of the U.S. dollar relative to a basket of foreign currencies (Proxy: UUP ETF). (Source: Alpha Vantage)</span>`;
        } else if (asset.name === "S&P 500") {
          tooltip = `<span class="index-tooltip">Stock market index tracking the performance of 500 large companies listed on U.S. exchanges (Proxy: SPY ETF). (Source: Alpha Vantage)</span>`;
        }

        quoteLeft.appendChild(nameStrong);
        quoteLeft.innerHTML += tooltip;

        const quoteRight = document.createElement('div');
        quoteRight.className = 'quote-right';

        const quotePrice = document.createElement('span');
        quotePrice.className = 'quote-price';
        quotePrice.textContent = asset.price;

        const quoteChange = document.createElement('span');
        quoteChange.className = `quote-change ${asset.positive ? 'positive' : 'negative'}`;
        quoteChange.textContent = asset.change;

        quoteRight.appendChild(quotePrice);
        quoteRight.appendChild(quoteChange);

        quote.appendChild(quoteLeft);
        quote.appendChild(quoteRight);
        quoteWrapper.appendChild(quote);
        quotesContainer.appendChild(quoteWrapper);
      });

      updateFooterPrices(assetsToRender);
    }

    function updateFooterPrices(assetsData) {
      const btcPriceElement = document.getElementById('footer-btc-price');
      const goldPriceElement = document.getElementById('footer-gold-price');
      const silverPriceElement = document.getElementById('footer-silver-price');

      const btcData = assetsData.find(asset => asset.name === "Bitcoin");
      const goldData = assetsData.find(asset => asset.name === "Gold");
      const silverData = assetsData.find(asset => asset.name === "Silver");

      if (btcPriceElement && btcData) btcPriceElement.textContent = btcData.price;
      if (goldPriceElement && goldData) goldPriceElement.textContent = goldData.price;
      if (silverPriceElement && silverData) silverPriceElement.textContent = silverData.price;
    }

    async function fetchBitcoinPrice() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();

        if (data && data.bitcoin) {
          const price = data.bitcoin.usd;
          const change = data.bitcoin.usd_24h_change;
          return {
            price: formatCurrency(price),
            change: formatPercentageChange(change),
            positive: change >= 0
          };
        }
        throw new Error('Dados inválidos da API CoinGecko');
      } catch (error) {
        console.error('Erro ao buscar preço do Bitcoin:', error);
        return null;
      }
    }

    async function fetchGoldPrice() {
      try {
        const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=GLD&apikey=${ALPHA_VANTAGE_API_KEY}`;
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();

        if (data && data['Global Quote'] && data['Global Quote']['05. price']) {
          const price = parseFloat(data['Global Quote']['05. price']) * 10;
          const changePercent = parseFloat(data['Global Quote']['10. change percent'].replace('%', ''));

          return {
            price: formatCurrency(price),
            change: formatPercentageChange(changePercent),
            positive: changePercent >= 0
          };
        }
        throw new Error('Dados inválidos da API Alpha Vantage para GLD');
      } catch (error) {
        console.error('Erro ao buscar preço do Ouro:', error);
        return null;
      }
    }

    async function fetchSilverPrice() {
      try {
        const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=SLV&apikey=${ALPHA_VANTAGE_API_KEY}`;
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();

        if (data && data['Global Quote'] && data['Global Quote']['05. price']) {
          const price = parseFloat(data['Global Quote']['05. price']) * 1.5;
          const changePercent = parseFloat(data['Global Quote']['10. change percent'].replace('%', ''));

          return {
            price: formatCurrency(price),
            change: formatPercentageChange(changePercent),
            positive: changePercent >= 0
          };
        }
        throw new Error('Dados inválidos da API Alpha Vantage para SLV');
      } catch (error) {
        console.error('Erro ao buscar preço da Prata:', error);
        return null;
      }
    }

    async function fetchTreasuryYield() {
      try {
        const url = `https://www.alphavantage.co/query?function=TREASURY_YIELD&interval=daily&maturity=10year&apikey=${ALPHA_VANTAGE_API_KEY}`;
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();

        if (data && data.data && data.data.length >= 2) {
          const latestYield = parseFloat(data.data[0].value);
          const previousYield = parseFloat(data.data[1].value);
          const change = latestYield - previousYield;

          return {
            price: `${latestYield.toFixed(2)}%`,
            change: formatAbsoluteChange(change),
            positive: change >= 0
          };
        }
        throw new Error('Dados insuficientes da API Alpha Vantage para Treasury Yield');
      } catch
